{"version":3,"sources":["../src/notification.js"],"names":["define","$","init","context","element","document","getElementById","notifications","createElement","id","innerHTML","parentNode","insertBefore","require","templates","render","then","html","js","appendNodeContents","fail","ex","setBody","message","fn","tool_gnotify_acknowledge_notification","$id","notification","hidden","ajax","promises","call","methodname","args","done","response","alert"],"mappings":"AAAAA,OAAM,6BAAC,CAAC,QAAD,CAAD,CAAa,SAASC,CAAT,CAAY,CAC3B,MAAO,CACHC,IAAI,CAAE,cAASC,CAAT,CAAkB,IAChBC,CAAAA,CAAO,CAAGC,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CADM,CAEhBC,CAAa,CAAGF,QAAQ,CAACG,aAAT,CAAuB,KAAvB,CAFA,CAGpBD,CAAa,CAACE,EAAd,CAAmB,eAAnB,CACAF,CAAa,CAACG,SAAd,CAA0B,0BAA1B,CACAN,CAAO,CAACO,UAAR,CAAmBC,YAAnB,CAAgCL,CAAhC,CAA+CH,CAA/C,EACAS,OAAO,CAAC,CAAC,gBAAD,CAAD,CAAqB,SAASC,CAAT,CAAoB,CAG5CX,CAAO,cAAP,CAA2BA,CAA3B,CACAW,CAAS,CAACC,MAAV,CAAiB,4BAAjB,CAA+CZ,CAA/C,EAEKa,IAFL,CAEU,SAASC,CAAT,CAAeC,CAAf,CAAmB,CAGrBJ,CAAS,CAACK,kBAAV,CAA6B,yBAA7B,CAAwDF,CAAxD,CAA8DC,CAA9D,CACH,CANL,EAMOE,IANP,CAMY,SAASC,CAAT,CAAa,CACjBP,CAAS,CAACQ,OAAV,CAAkBD,CAAE,CAACE,OAArB,CACH,CARL,CASH,CAbM,CAAP,CAcAtB,CAAC,CAACuB,EAAF,CAAKC,qCAAL,CAA6C,SAASC,CAAT,CAAc,CACvD,GAAIC,CAAAA,CAAY,CAAGtB,QAAQ,CAACC,cAAT,CAAwBoB,CAAG,CAAG,UAA9B,CAAnB,CACAC,CAAY,CAACC,MAAb,IACAf,OAAO,CAAC,CAAC,WAAD,CAAD,CAAgB,SAASgB,CAAT,CAAe,CAClC,GAAIC,CAAAA,CAAQ,CAAGD,CAAI,CAACE,IAAL,CAAU,CACrB,CAAEC,UAAU,CAAE,sCAAd,CAAsDC,IAAI,CAAE,CAAExB,EAAE,CAAEiB,CAAN,CAA5D,CADqB,CAAV,CAAf,CAGAI,CAAQ,CAAC,CAAD,CAAR,CAAYI,IAAZ,CAAiB,SAASC,CAAT,CAAmB,CAChCC,KAAK,CAAC,OAASD,CAAV,CACR,CAFD,EAEGf,IAFH,CAEQ,SAASC,CAAT,CAAa,CAEjBe,KAAK,CAAC,YAAcf,CAAE,CAACE,OAAlB,CACR,CALD,CAMH,CAVM,CAWV,CACJ,CApCE,CAsCV,CAvCK,CAAN","sourcesContent":["define(['jquery'], function($) {\n    return {\n        init: function(context) {\n            var element = document.getElementById('page');\n            var notifications = document.createElement('div');\n            notifications.id = 'notifications';\n            notifications.innerHTML = '<div class=\"content\"/>';\n            element.parentNode.insertBefore(notifications, element);\n            require(['core/templates'], function(templates) {\n                // This will be the context for our template. So {{name}} in the template will resolve to \"Tweety bird\".\n                // This will call the function to load and render our template.\n                context['notifications'] = context;\n                templates.render('tool_gnotify/notifications', context)\n                // It returns a promise that needs to be resoved.\n                    .then(function(html, js) {\n                        // Here eventually I have my compiled template, and any javascript that it generated.\n                        // The templates object has append, prepend and replace functions.\n                        templates.appendNodeContents('#notifications .content', html, js);\n                    }).fail(function(ex) {\n                        templates.setBody(ex.message);\n                    });\n            });\n            $.fn.tool_gnotify_acknowledge_notification = function($id) {\n                var notification = document.getElementById($id + '-gnotify');\n                notification.hidden = true;\n                require(['core/ajax'], function(ajax) {\n                    var promises = ajax.call([\n                        { methodname: 'tool_gnotify_acknoledge_notification', args: { id: $id} }\n                    ]);\n                    promises[0].done(function(response) {\n                        alert('done' + response);\n                    }).fail(function(ex) {\n                        // do something with the exception\n                        alert('exception' + ex.message);\n                    });\n                });\n            };\n        }\n    };\n});\n"],"file":"notification.min.js"}