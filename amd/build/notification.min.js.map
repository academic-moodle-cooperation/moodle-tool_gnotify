{"version":3,"sources":["../src/notification.js"],"names":["define","$","init","context","sticky","element","document","getElementById","notifications","createElement","id","className","innerHTML","insertBefore","firstChild","require","templates","render","then","html","js","appendNodeContents","fail","ex","setBody","message","fn","tool_gnotify_acknowledge_notification","$id","notification","hidden","ajax","promises","call","methodname","args","done"],"mappings":"AAAAA,OAAM,6BAAC,CAAC,QAAD,CAAD,CAAa,SAAUC,CAAV,CAAa,CAC5B,MAAO,CACHC,IAAI,CAAE,cAAUC,CAAV,CAAmBC,CAAnB,CAA2B,IACzBC,CAAAA,CAAO,CAAGC,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CADe,CAEzBC,CAAa,CAAGF,QAAQ,CAACG,aAAT,CAAuB,KAAvB,CAFS,CAG7BD,CAAa,CAACE,EAAd,CAAmB,eAAnB,CACA,GAAe,GAAX,GAAAN,CAAJ,CAAoB,CAChBI,CAAa,CAACG,SAAd,CAA0B,yBAC7B,CAFD,IAEO,CACHH,CAAa,CAACG,SAAd,CAA0B,2BAC7B,CACDH,CAAa,CAACI,SAAd,CAA0B,0BAA1B,CACAP,CAAO,CAACQ,YAAR,CAAqBL,CAArB,CAAoCH,CAAO,CAACS,UAA5C,EACAC,OAAO,CAAC,CAAC,gBAAD,CAAD,CAAqB,SAAUC,CAAV,CAAqB,CAG7Cb,CAAO,cAAP,CAA2BA,CAA3B,CACAa,CAAS,CAACC,MAAV,CAAiB,4BAAjB,CAA+Cd,CAA/C,EAEKe,IAFL,CAEU,SAAUC,CAAV,CAAgBC,CAAhB,CAAoB,CAGtBJ,CAAS,CAACK,kBAAV,CAA6B,yBAA7B,CAAwDF,CAAxD,CAA8DC,CAA9D,CACH,CANL,EAMOE,IANP,CAMY,SAAUC,CAAV,CAAc,CACtBP,CAAS,CAACQ,OAAV,CAAkBD,CAAE,CAACE,OAArB,CACH,CARD,CASH,CAbM,CAAP,CAcAxB,CAAC,CAACyB,EAAF,CAAKC,qCAAL,CAA6C,SAAUC,CAAV,CAAe,CACxD,GAAIC,CAAAA,CAAY,CAAGvB,QAAQ,CAACC,cAAT,CAAwBqB,CAAG,CAAG,UAA9B,CAAnB,CACAC,CAAY,CAACC,MAAb,IACAf,OAAO,CAAC,CAAC,WAAD,CAAD,CAAgB,SAAUgB,CAAV,CAAgB,CACnC,GAAIC,CAAAA,CAAQ,CAAGD,CAAI,CAACE,IAAL,CAAU,CACrB,CAACC,UAAU,CAAE,sCAAb,CAAqDC,IAAI,CAAE,CAACzB,EAAE,CAAEkB,CAAL,CAA3D,CADqB,CAAV,CAAf,CAGAI,CAAQ,CAAC,CAAD,CAAR,CAAYI,IAAZ,EACH,CALM,CAMV,CACJ,CApCE,CAsCV,CAvCK,CAAN","sourcesContent":["define(['jquery'], function ($) {\n    return {\n        init: function (context, sticky) {\n            var element = document.getElementById('page');\n            var notifications = document.createElement('div');\n            notifications.id = 'notifications';\n            if (sticky === \"1\") {\n                notifications.className = 'row notification-sticky';\n            } else {\n                notifications.className = 'row notification-relative';\n            }\n            notifications.innerHTML = '<div class=\"content\"/>';\n            element.insertBefore(notifications, element.firstChild);\n            require(['core/templates'], function (templates) {\n                // This will be the context for our template. So {{name}} in the template will resolve to \"Tweety bird\".\n                // This will call the function to load and render our template.\n                context['notifications'] = context;\n                templates.render('tool_gnotify/notifications', context)\n                // It returns a promise that needs to be resoved.\n                    .then(function (html, js) {\n                        // Here eventually I have my compiled template, and any javascript that it generated.\n                        // The templates object has append, prepend and replace functions.\n                        templates.appendNodeContents('#notifications .content', html, js);\n                    }).fail(function (ex) {\n                    templates.setBody(ex.message);\n                });\n            });\n            $.fn.tool_gnotify_acknowledge_notification = function ($id) {\n                var notification = document.getElementById($id + '-gnotify');\n                notification.hidden = true;\n                require(['core/ajax'], function (ajax) {\n                    var promises = ajax.call([\n                        {methodname: 'tool_gnotify_acknoledge_notification', args: {id: $id}}\n                    ]);\n                    promises[0].done();\n                });\n            };\n        }\n    };\n});\n"],"file":"notification.min.js"}