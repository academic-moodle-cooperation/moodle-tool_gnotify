{"version":3,"sources":["../src/notification.js"],"names":["init","uid","gnotify","document","querySelector","context","JSON","parse","dataset","pendingPromise","Pending","Templates","renderForPromise","then","html","js","prependNodeContents","resolve","fail","ex","Log","error","message","acknowledge","id","notification","getElementById","hidden","Ajax","call","methodname","args","done"],"mappings":"4MAeA,OACA,OACA,O,6dAEO,GAAMA,CAAAA,CAAI,4CAAG,WAAMC,CAAN,+FACZC,CADY,CACFC,QAAQ,CAACC,aAAT,YAA2BH,CAA3B,EADE,CAEZI,CAFY,CAEFC,IAAI,CAACC,KAAL,CAAWL,CAAO,CAACM,OAAR,CAAgBN,OAA3B,CAFE,CAIVO,CAJU,CAIO,GAAIC,UAAJ,CAAY,gBAAZ,CAJP,kTAKe,gBALf,gDAKVC,CALU,QAMhBA,CAAS,CAACC,gBAAV,CAA2B,4BAA3B,CAAyDP,CAAzD,EACKQ,IADL,CACU,WAAmB,IAAjBC,CAAAA,CAAiB,GAAjBA,IAAiB,KAAXC,EAAW,CAAXA,CAAW,YAAR,EAAQ,GACrBJ,CAAS,CAACK,mBAAV,CAA8B,OAA9B,CAAuCF,CAAvC,CAA6CC,CAA7C,CACH,CAHL,EAIKF,IAJL,CAIUJ,CAAc,CAACQ,OAJzB,EAKKC,IALL,CAKU,WAAU,IAARC,CAAAA,CAAQ,GAARA,EAAQ,CACZC,UAAIC,KAAJ,CAAUF,CAAE,CAACG,OAAb,CACH,CAPL,EANgB,wCAAH,uDAAV,C,SAgBA,GAAMC,CAAAA,CAAW,CAAG,SAACC,CAAD,CAAQ,CAC/B,GAAIC,CAAAA,CAAY,CAAGtB,QAAQ,CAACuB,cAAT,CAAwBF,CAAE,CAAG,kBAA7B,CAAnB,CACAC,CAAY,CAACE,MAAb,IAQAC,UAAKC,IAAL,CAAU,CAPM,CACZC,UAAU,CAAE,uCADA,CAEZC,IAAI,CAAE,CACFP,EAAE,CAAEA,CADF,CAFM,CAON,CAAV,EAAqB,CAArB,EAAwBQ,IAAxB,EACH,CAXM,C,0BAaQ,CACXhC,IAAI,CAAJA,CADW,CAEXuB,WAAW,CAAXA,CAFW,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\nimport Ajax from 'core/ajax';\nimport Log from 'core/log';\nimport Pending from \"core/pending\";\n\nexport const init = async(uid) => {\n    let gnotify = document.querySelector(`#${uid}`);\n    let context = JSON.parse(gnotify.dataset.gnotify);\n\n    const pendingPromise = new Pending('gnotfiy-render');\n    const Templates = await import('core/templates');\n    Templates.renderForPromise('tool_gnotify/notifications', context)\n        .then(({html, js=''}) => {\n            Templates.prependNodeContents('#page', html, js);\n        })\n        .then(pendingPromise.resolve)\n        .fail(({ex}) => {\n            Log.error(ex.message);\n        });\n};\n\nexport const acknowledge = (id) => {\n    let notification = document.getElementById(id + '-gnotify-wrapper');\n    notification.hidden = true;\n    const request = {\n        methodname: 'tool_gnotify_acknowledge_notification',\n        args: {\n            id: id,\n        }\n    };\n\n    Ajax.call([request])[0].done();\n};\n\nexport default {\n    init,\n    acknowledge,\n};"],"file":"notification.min.js"}